// RUN: cir-opt %s -cir-to-mlir -cse -o %t.mlir
// RUN: FileCheck %s --input-file %t.mlir

!s32i = !cir.int<s, 32>
!u32i = !cir.int<u, 32>
module {
  cir.func  @foo(%arg0: !cir.ptr<!u32i>, %arg1: !cir.ptr<!u32i>, %arg2: !s32i) {
    %0 = cir.ptr_stride(%arg0 : !cir.ptr<!u32i>, %arg2 : !s32i), !cir.ptr<!u32i>
    %1 = cir.load %0 : !cir.ptr<!u32i>, !u32i
    %2 = cir.ptr_stride(%arg1 : !cir.ptr<!u32i>, %arg2 : !s32i), !cir.ptr<!u32i>
    cir.store %1, %2 : !u32i, !cir.ptr<!u32i>
    cir.return
  }
}

// CHECK: module {
// CHECK:   func.func @foo(%arg0: memref<?xi32>, %arg1: memref<?xi32>, %arg2: i32) {
// CHECK:     %0 = arith.index_cast %arg2 : i32 to index
// CHECK:     %1 = memref.load %arg0[%0] : memref<?xi32>
// CHECK:     memref.store %1, %arg1[%0] : memref<?xi32>
// CHECK:     return
// CHECK:   }
// CHECK: }

